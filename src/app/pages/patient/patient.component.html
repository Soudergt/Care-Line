<div class="content">
  <div class="patient-header" fxLayout="row wrap" [ngStyle.xs]="{'margin-top': '0px'}" [ngStyle.sm]="{'margin-top': '0px'}">
    <div class="patient-info-container" fxLayout="row" fxFlex="1 2 auto">
      <div class="photo-container" fxFlex="1 1 150px">
        <div class="user-img drop-shadow" [ngStyle]="{'background-image': patientPhoto}" [ngStyle.xs]="{'width': '75px', 'height': '75px'}" [ngStyle.sm]="{'width': '100px', 'height': '100px'}"></div>
      </div>
      <div class="patient-info" fxFlex="1 1 auto">
        <div class="patient-name">{{patient?.NameFirst}} {{patient?.NameLast}}</div>
        <a class="patient-clinic" [routerLink]="['/clinic/1']">CareLine Clinic</a>
        <div class="patient-sub-text">{{patient?.HomeAddress}}</div>
      </div>
    </div>
  </div>
  <div class="content-pad">
    <app-schedule [activeDay]="activeDay" (newDay)="getNotesForDay($event)" [patient]="patient"></app-schedule>
  </div>
  <div class="patient-content" fxLayout="row wrap" fxLayoutAlign="space-between">
    <div fxFlex="1 1 50%">
      <div fxLayout="column">
        <div class="info-section card-shadow" fxFlex [ngStyle.xs]="{'margin-left': '12px', 'margin-right': '6px'}" [ngStyle.sm]="{'margin-left': '15px', 'margin-right': '15px'}">
          <div fxLayout="column">
            <div class="header" fxLayout="row" fxFlex="1 1 auto">
              <div class="module-logo" fxFlex="0 0 75px">
                <fa-icon [icon]="faInfo" size="3x" [inverse]="true"></fa-icon>
              </div>
              <div class="header-text" fxFlex="1 1 auto">Patient Information</div>
            </div>
            <mat-divider style="width: 100%"></mat-divider>
            <div class="content" fxFlex="1 1 auto">
              <div fxLayout="row wrap">
                <div fxFlex="1 1 auto">
                  <h3 class="section-header">General Info</h3>
                  <mat-list>
                    <mat-list-item>
                      <label class="info-label" for="bday">Birthday:</label>
                      <span id="bday">{{patient?.DateOfBirth | date}}</span>
                    </mat-list-item>
                    <mat-list-item>
                      <label class="info-label" for="blood">Bloodtype:</label>
                      <span id="blood">{{patient?.BloodType}}</span>
                    </mat-list-item>
                    <mat-list-item>
                      <label class="info-label" for="mphone">Mobile Phone:</label>
                      <span id="mphone">{{patient?.MobilePhone}}</span>
                    </mat-list-item>
                    <mat-list-item>
                      <label class="info-label" for="hphone">Home Phone:</label>
                      <span id="hphone">{{patient?.HomePhone}}</span>
                    </mat-list-item>
                    <mat-list-item>
                      <label class="info-label" for="height">Height:</label>
                      <span id="height">{{patient?.HeightInches}} in</span>
                    </mat-list-item>
                    <mat-list-item>
                      <label class="info-label" for="weight">Weight:</label>
                      <span id="weight">{{patient?.WeightPounds}} lbs</span>
                    </mat-list-item>
                  </mat-list>
                </div>
                <!-- <div fxFlex="1 1 auto">
                  <h3 class="section-header">Emergency Contact</h3> -->
                <!-- <mat-list>
                    <mat-list-item>
                      <label class="info-label" for="name">Name:</label>
                      <span id="name">{{patient?.emergency.fn}} {{patient?.emergency.ln}}</span>
                    </mat-list-item>
                    <mat-list-item>
                      <label class="info-label" for="address">Address:</label>
                      <span id="address">{{patient?.emergency.address}}</span>
                    </mat-list-item>
                    <mat-list-item>
                      <label class="info-label" for="phone">Phone:</label>
                      <span id="phone">{{patient?.emergency.phone}}</span>
                    </mat-list-item>
                    <mat-list-item>
                      <label class="info-label" for="email">Email:</label>
                      <span id="email">{{patient?.emergency.email}}</span>
                    </mat-list-item>
                  </mat-list> -->
                <!-- </div> -->
              </div>
            </div>
          </div>
        </div>
        <div class="info-section card-shadow" fxFlex="50" [ngStyle.xs]="{'margin-left': '12px', 'margin-right': '6px'}" [ngStyle.sm]="{'margin-left': '15px', 'margin-right': '15px'}">
          <div fxLayout="column">
            <div class="header" fxLayout="row" fxFlex="1 1 auto">
              <div class="module-logo" fxFlex="0 0 75px">
                <fa-icon [icon]="faUtensils" size="3x" [inverse]="true"></fa-icon>
              </div>
              <div class="header-text" fxFlex="1 1 auto">Diet Information</div>
            </div>
            <mat-divider style="width: 100%"></mat-divider>
            <div class="content" fxFlex="1 1 auto">
              <div fxLayout="column wrap">
                <mat-list>
                  <mat-list-item>
                    <label class="info-label" for="dname">Diet Name:</label>
                    <span id="dname">{{patient?.DietName}}</span>
                  </mat-list-item>
                  <mat-list-item>
                    <label class="info-label" for="dinfo">Diet Info:</label>
                    <span id="dinfo">{{patient?.DietInfo}}</span>
                  </mat-list-item>
                  <mat-list-item>
                    <label class="info-label" for="allergies">Allergies:</label>
                    <span id="allergies">{{patient?.AllergyInfo}}</span>
                  </mat-list-item>
                  <mat-list-item>
                    <label class="info-label" for="likes">Likes:</label>
                    <span id="likes">{{patient?.Likes}}</span>
                  </mat-list-item>
                  <mat-list-item>
                    <label class="info-label" for="dislikes">Dislikes:</label>
                    <span id="dislikes">{{patient?.Dislikes}}</span>
                  </mat-list-item>
                </mat-list>
              </div>
            </div>
          </div>
        </div>
        <div class="info-section card-shadow" fxFlex="50" [ngStyle.xs]="{'margin-left': '12px', 'margin-right': '6px'}" [ngStyle.sm]="{'margin-left': '15px', 'margin-right': '15px'}">
          <div fxLayout="column">
            <div class="header" fxLayout="row" fxFlex="1 1 auto">
              <div class="module-logo" fxFlex="0 0 75px">
                <fa-icon [icon]="faPrescriptionBottleAlt" size="3x" [inverse]="true"></fa-icon>
              </div>
              <div class="header-text" fxFlex="1 1 auto">Treatment</div>
            </div>
            <mat-divider style="width: 100%"></mat-divider>
            <div class="content" fxFlex="1 1 auto">
              <div fxLayout="column wrap">
                <mat-list>
                  <mat-list-item>
                    <label class="info-label" for="meds">Medications:</label>
                    <span id="meds">{{patient?.Medications}}</span>
                  </mat-list-item>
                  <mat-list-item>
                    <label class="info-label" for="exercise">Exercise:</label>
                    <span id="exercise">{{patient?.Exercise}}</span>
                  </mat-list-item>
                  <mat-list-item>
                    <label class="info-label" for="restrictions">Physical Restrictions:</label>
                    <span id="restrictions">{{patient?.PhysicalRestrictions}}</span>
                  </mat-list-item>
                </mat-list>
              </div>
            </div>
          </div>
        </div>
        <div class="info-section card-shadow" fxFlex="50" [ngStyle.xs]="{'margin-left': '12px', 'margin-right': '6px'}" [ngStyle.sm]="{'margin-left': '15px', 'margin-right': '15px'}">
          <div fxLayout="column">
            <div class="header" fxLayout="row" fxFlex="1 1 auto">
              <div class="module-logo" fxFlex="0 0 75px">
                <fa-icon [icon]="faCommentMedical" size="3x" [inverse]="true"></fa-icon>
              </div>
              <div class="header-text" fxFlex="1 1 auto">Wants / Needs</div>
            </div>
            <mat-divider style="width: 100%"></mat-divider>
            <div class="content" fxFlex="1 1 auto">
              <div fxLayout="column wrap">

              </div>
            </div>
          </div>
        </div>
        <!-- <div class="message-section card-shadow" fxFlex [ngStyle.xs]="{'margin-left': '12px', 'margin-right': '6px'}" [ngStyle.sm]="{'margin-left': '15px', 'margin-right': '15px'}">
          <div fxLayout="column">
            <div class="header" fxLayout="row" fxFlex="1 1 auto">
              <div class="module-logo" fxFlex="0 0 75px">
                <fa-icon [icon]="faComments" size="3x" [inverse]="true"></fa-icon>
              </div>
              <div class="header-text" fxFlex="1 1 auto">Messages</div>
            </div>
            <mat-divider style="width: 100%"></mat-divider>
            <div class="content" fxFlex>
              <mat-action-list style="padding-top: 0px;" *ngIf="selectedContact == null">
                <button mat-list-item (click)="selectContact()">
                  <img matListAvatar src="/assets/images/people/patients/frank.jpg" alt="contact image">
                  <h4 class="contact-name" mat-line>Frank</h4>
                  <p mat-line></p>
                </button>
                <button mat-list-item (click)="selectContact()">
                  <img matListAvatar src="/assets/images/people/patients/duke.jpg" alt="contact image">
                  <h4 class="contact-name" mat-line>Duke</h4>
                  <p mat-line></p>
                </button>
                <button mat-list-item (click)="selectContact()">
                  <img matListAvatar src="/assets/images/people/patients/cathy.jpg" alt="contact image">
                  <h4 class="contact-name" mat-line>Cathy</h4>
                  <p mat-line></p>
                </button>
              </mat-action-list>
              <div class="chat-header" fxLayout="row" *ngIf="selectedContact != null">
                <button mat-icon-button class="back-btn" style="color: #04376a;" (click)="selectedContact = null">
                  <fa-icon [icon]="faAngleLeft" size="3x"></fa-icon>
                </button>
                <div fxFlex class="contact-header-text">{{selectedContact?.name}}</div>
              </div>
              <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 377.00267 57.57043" style="margin-top: -45px;" *ngIf="selectedContact != null">
                <title>heartbeat</title>
                <path d="M282.5,245.5" transform="translate(-249.49733 -233.71479)" style="fill:#fff;stroke:#000;stroke-miterlimit:10" />
                <path d="M249.5,264.5c187-1,187,0,187,0h138l6-13,6,36,5-50,6,36,9-11h20" transform="translate(-249.49733 -233.71479)" style="fill:#fff;stroke:#3d6783;stroke-width:1px;stroke-miterlimit:10" />
              </svg>
              <div class="chat-window" *ngIf="selectedContact != null">
                <div class="messages">
                  <div class="message-container contact">
                    <img class="message-img" src="/assets/images/people/patients/frank.jpg" alt="contact image">
                    <div class="message contact">
                      test
                    </div>
                  </div>
                  <div class="message-container user">
                    <div class="message user">
                      test
                    </div>
                    <img class="message-img" src="/assets/images/people/patients/frank.jpg" alt="contact image">
                  </div>
                </div>
                <div class="message-input">
                  <mat-form-field fxFlex style="margin-right: 12px;">
                    <input matInput placeholder="Message">
                  </mat-form-field>
                  <button mat-raised-button color="primary">Send</button>
                </div>
              </div>
            </div>
          </div>
        </div> -->
      </div>
    </div>
    <div fxFlex="1 1 50%">
      <div fxLayout="column">
        <div class="note-section" fxFlex [ngStyle.xs]="{'margin-left': '12px', 'margin-right': '6px'}" [ngStyle.sm]="{'margin-left': '15px', 'margin-right': '15px'}">
          <div fxLayout="column">
            <div class="header" fxLayout="row" fxFlex="1 1 auto">
              <div class="module-logo medical" fxFlex="0 0 75px">
                <fa-icon [icon]="faNotesMedical" size="3x" [inverse]="true"></fa-icon>
              </div>
              <div class="header-text-inverse" fxFlex="1 1 auto">Medical Notes</div>
              <button type="button" class="create-btn" mat-raised-button color="primary" (click)="addNote()">Create</button>
            </div>
            <mat-divider style="width: 100%"></mat-divider>
            <div class="content" fxFlex="1 1 auto">
              <div fxLayout="column wrap">
                <div class="note-box-new" *ngIf="showNewNote" fxFlex="1 1 auto">
                  <form (ngSubmit)="createNote()" [formGroup]="noteForm" fxLayout="column" fxLayoutGap="5px">
                    <mat-form-field>
                      <input matInput type="text" placeholder="Title" formControlName="Title" required>
                    </mat-form-field>
                    <mat-form-field>
                      <textarea matInput cdkTextareaAutosize placeholder="Activities" formControlName="Activities" required></textarea>
                    </mat-form-field>
                    <mat-form-field>
                      <textarea matInput cdkTextareaAutosize placeholder="Health Concerns" formControlName="Concerns" required></textarea>
                    </mat-form-field>
                    <mat-form-field>
                      <textarea matInput cdkTextareaAutosize placeholder="Comments" formControlName="Comments" required></textarea>
                    </mat-form-field>
                    <div class="radio-group-label">Patient Mood / Feeling:</div>
                    <mat-radio-group formControlName="BehaviorMood" required>
                      <mat-radio-button class="mood-radio" value="very good" aria-label="very good" color="primary">
                        <fa-icon [icon]="faGrinBeam" size="2x"></fa-icon>
                      </mat-radio-button>
                      <mat-radio-button class="mood-radio" value="good" aria-label="good" color="primary">
                        <fa-icon [icon]="faSmile" size="2x"></fa-icon>
                      </mat-radio-button>
                      <mat-radio-button class="mood-radio" value="meh" aria-label="meh" color="primary">
                        <fa-icon [icon]="faMeh" size="2x"></fa-icon>
                      </mat-radio-button>
                      <mat-radio-button class="mood-radio" value="bad" aria-label="bad" color="primary">
                        <fa-icon [icon]="faFrown" size="2x"></fa-icon>
                      </mat-radio-button>
                      <mat-radio-button class="mood-radio" value="very bad" aria-label="very bad" color="primary">
                        <fa-icon [icon]="faTired" size="2x"></fa-icon>
                      </mat-radio-button>
                    </mat-radio-group>
                    <div class="footer" fxLayout="row" fxLayoutGap="30px">
                      <button type="button" mat-stroked-button fxFlex="1 1 auto" (click)="cancelAddNote()">Cancel</button>
                      <button type="submit" mat-flat-button fxFlex="1 1 auto" color="primary">Save</button>
                    </div>
                  </form>
                </div>
                <div class="note-box" *ngFor="let note of notes" fxFlex="1 1 auto">
                  <div class="note-header" fxLayout="row" fxLayoutAlign="center center">
                    <fa-icon class="mood-icon" fxFlex="0 1 auto;" [icon]="faGrinBeam" size="2x" *ngIf="note?.BehaviorMood.toLowerCase() === 'very good'"></fa-icon>
                    <fa-icon class="mood-icon" fxFlex="0 1 auto;" [icon]="faSmile" size="2x" *ngIf="note?.BehaviorMood.toLowerCase() === 'good'"></fa-icon>
                    <fa-icon class="mood-icon" fxFlex="0 1 auto;" [icon]="faMeh" size="2x" *ngIf="note?.BehaviorMood.toLowerCase() === 'meh'"></fa-icon>
                    <fa-icon class="mood-icon" fxFlex="0 1 auto;" [icon]="faFrown" size="2x" *ngIf="note?.BehaviorMood.toLowerCase() === 'bad'"></fa-icon>
                    <fa-icon class="mood-icon" fxFlex="0 1 auto;" [icon]="faTired" size="2x" *ngIf="note?.BehaviorMood.toLowerCase() === 'very bad'"></fa-icon>
                    <div class="title" fxFlex="1 1 auto;">{{note.Title}}</div>
                    <button fxFlex="0 1 auto;" mat-icon-button [matMenuTriggerFor]="menu">
                      <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu" xPosition="before">
                      <button mat-menu-item (click)="editNote(note)">
                        <span>Edit Note</span>
                      </button>
                      <button mat-menu-item (click)="deleteNote(note)">
                        <span>Delete Note</span>
                      </button>
                    </mat-menu>
                  </div>
                  <mat-divider class="divider"></mat-divider>
                  <div class="note-content">
                    <div class="info">
                      <div class="info-label"><b>Activities:</b></div>
                      <div>{{note?.Activities}}</div>
                    </div>
                    <div class="info">
                      <div class="info-label"><b>Health Concerns:</b> </div>
                      <div>{{note?.Concerns}}</div>
                    </div>
                    <div class="info">
                      <div class="info-label"><b>Comments:</b></div>
                      <div>{{note?.Comments}}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
